<!DOCTYPE HTML>
<html lang="en-us">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.86, maximum-scale=5.0, minimum-scale=0.86">
    <title>WDD 330 Final Project Description</title>

    <link rel="stylesheet" href="./styles.css" />
    <script>

    </script>

    <style>
        * {
            font-size: 14pt;
        }
        html {
            background-color: whitesmoke;
        }
        body {
            max-width: 800px;
        }

        h1 {
            font-size: 1.5em;
        }

        h2 {
            font-size: 1.25em;
        }

        h3 {
            margin-top: 2em;
        }

        section {
            margin-top: 3em;
        }
    
        .student {
            margin-top: -0.7em;
            margin-left: 1.5em;
        }

        #javascript-rubrics li {
            margin-top: 1em;
        }
    </style>
</head>

<body>
    <h1>Description of Final Project &mdash; Poet's Pal</h1>
    <p class="student">Eugene C. Olsen, Section 7, Fall 2021</p>
    <section>
    <p><em>
        Tzu-li and Tzu-ssu were boasting about the size of their latest programs. 
        ‘Two-hundred thousand lines,’ said Tzu-li, ‘not counting comments!’ Tzu-ssu responded, 
        ‘Pssh, mine is almost a million lines already.’<br>
        Master Yuan-Ma said, ‘My best program has five hundred lines.’ 
        Hearing this, Tzu-li and Tzu-ssu were enlightened.<br><br>

        &mdash; Master Yuan-Ma, </em>The Book of Programming
    </p>
    <div>
        <p>Like Master Yuan-Ma's best program, my final project, Poet's Pal, has about 500 lines of code.</p>
    </div>
    </section>
    <section id="intro">
        <h2>Introduction</h2>
        <p>
            This document contains everything that was asked by the assignment and more. 
            It is lengthy and detailed &mdash; perhaps more lengthy and detailed that the
            instructor would like to read.
        </p>
        <p>
            The author would like to call the reader's attention to the 
            <a href="#grading">Map of Grading Rubrics to Code</a>, below.
            The section maps the stated grading rubrics to modules, functions, methods,
            and event handlers that address and fulfill each grading rubric, with hyperlinks 
            to the code on GitHub.
        </p>
    </section>
    <section>
        <h2>Description of the Poet's Pal</h2>
        <p>
            Poet's Pal is a small, mobile-friendly one-stop Web app for the discovery of
            basic literary devices based on specific criteria, such as rhyme, alliteration, and synonyms,
            for use by poets, songwriters, and other wordsmiths.
            It is more than just a rhyming dictionary and thesaurus, though it is these things; it uniquely allows the
            user to search by combinations of these devices and limit the results by the number of syllables &mdash;
            a handy feature when the wordsmith has a specific number or range of syllables to work with.
        </p>
        <p>
            The user interface of the Poet's Pal has two sections:
            <ol>
                <li>A form for entering search criteria:</li>
                <ol type="a">
                    <li>A word to rhyme with.</li>
                    <li>Words that begin with a letter or letters, useful in building alliteration and other similar devices.</li>
                    <li>Synonyms of a word.</li>
                    <li>Any combination of the above.</li>
                    <li>Optional limiting of the results to a specific number or range of syllables.</li>
                </ol>
                <li>
                    A table for displaying the search's results.  Results are limited to 50 
                    words that match "perfectly" with the addition of up to 50 imperfect rhymes.
                </li>
            </ol>
        </p>
        <p>
            The search engine for the Poet's Pal is the <a href="https://www.datamuse.com/api/" target="_blank">Datamuse API</a>.
        </p>
    </section>
    <section>
        <h2>How to Use the Poet's Pal</h2>
        <p>
            The Poet's Pal is a Web app that is mobile-friendly in portrait mode.
            The upper part of the user interface is a form with four input fields
            to define a word search, a Submit button to start the search,
            and the lower part is a table that displays 
            search results, as shown below:
        </p>
        <img src="images/poetspal.jpg" alt="Full form">
        <p>
            As seen in the example above, you can fill in any or all of the input fields.
            You can then click or tap the Submit button or press the Enter key and the
            app will search for the criteria entered and display any results in a table 
            below the submit button.
        </p>
        <p>
            Options for syllable selection are "less than" and "exactly", selectable 
            in the drop-down list to the right of the word "and" in the last line of
            input fields.  <strong>Note:</strong> Since the number of syllables is
            returned only when rhyming is involved, the "syllable" fields are disabled
            when nothing is entered in the "Rhymes with" field.
        </p>
        <p>
            Finally, tapping or clicking the Clear button will clear all of the fields and help 
            you start with a clean slate.
        </p>
    </section>
    <section>
        <h2>CSS Features Employed</h2>
        <p>Please see the <a href="#grading-css">CSS</a> section of <a href="#grading">Grading Rubrics to Code</a>, below.</p>
    </section>
    <section id="design">
        <h2>The Design Process</h2>
        <p>
            In the <a href="https://www.sitepoint.com/premium/courses/master-mobile-ux-2952" target="_blank">Master Mobile UX videos</a>, 
            assigned in Week 1 of this WDD330 course, 
            we learned about designing mobile-first.  
            <em>The very next week</em> at work, a customer, Cisco Systems,
            asked us to make a previously delivered Web app "mobile-friendly" after the fact.  
            I found out first-hand that
            it is much easier to design mobile-first than to take an app designed
            for tablet or Web and make it mobile-friendly later.
        </p>
        <p>
            Therefore, as I began to write proof-of-concept UI code for the Poet's Pal, I did so 
            using the device tools in Chrome.
        </p>
        <p>
            One of the major design goals has been to keep the app simple and functional. 
            There is always the temptation to make things more complex.  
            Sometimes I resisted the temptation to add more "whistles and bells" and sometimes I did not.
        </p>
        <p>
            The Model-View-Controller (MVC) pattern was considered but the model is so small that it didn't 
            seem useful or helpful to make it a class.  The View code is complex and extensive enough that putting 
            it in a class made very good sense.  A controller class seemed to be an unnecessary layer
            of complexity for this use case, so a controller class was not created.  
            Rather, the model and view are coordinated directly in the event handlers.  
            All event handling is done in main.js. 
            What we ended up with is the separation of concerns in a Model-View pattern, coordinated by 
            the event handlers rather than in a controller class.
        </p>
        <p>
            The Datamuse API sometimes returns results that are not "safe for work," family friendly, or 
            appropriate for BYU.  I decided to filter out such results.  I found an Open Source list of 
            profane words by Zac Anger, which I encoded to Base64 so I didn't have to look at the words.
            This list is used to filter profanity out of the results.
        </p>
        <p>
            A marbled background image was added to "dress the app up" a little bit without being gaudy
            or distracting.
        </p>
    </section>
    <section>
        <h2>Original Concept and Final Implementation</h2>
        <p>
            The final implementation of the Poet's Pal varies only in small details from the original concept.
            The final result matches the original concept in every major respect.   
        </p>
        <p>
            One exception to this is the handling of imperfect rhymes, also known as "near-rhymes."
            Originally, the app
            displayed a checkbox to the right of the "Rhymes with" input field with a label that said 
            "nearly" to the right of the checkbox, as shown below:
        </p>
        <img src="images/formfull.JPG" alt="Full form">
        <p>
            Usability testing with friends and 
            family showed this to be confusing.  One of my sons suggested that I display perfect as well as 
            any imperfect rhymes and just dislpay the words that rhyme imperfectly in <em>italics.</em>  
        </p>
        <p>
            In the final delivery of the app, the checkbox and its label have been removed
            and perfect rhymes are displayed first in the results table,
            followed by the list of imperfect rhymes.  Again, all words that are deemed by the API
            to rhyme imperfectly are <em>italicized.</em>
        </p>
        <p>
            The Datamuse API is easy to use in its raw form but the output JSON is unformatted.  
            It is easy to enter the url and query parameters for the Datamuse API in the address bar
            of a browser and get the results on a Web page.
            The Poet's Pal was conceptualized to make input even easier and intuitive, and the output readable.
            The final implementation of the Poet's Pal achieves these goals.
        </p>
    </section>
    <section id="grading">
        <h2>Grading Rubrics to Code</h2>
        <p>
            This section maps the grading rubrics to specific modules and functions in the 
            <a href="https://github.com/eolsenbyui/eolsenbyui.github.io/tree/master/wdd330/week14/final" target="_blank">code</a>.
            The entries are meant to be representative and not exhaustive.
        </p>
        <h3 id="grading-javascript">JavaScript Usage</h3>
        <p>There are four JavaScript modules in the Poet's Pal:
            <ul>
                <li>
                    <a href="https://github.com/eolsenbyui/eolsenbyui.github.io/blob/master/wdd330/week14/final/main.js" target="_blank">main.js</a> 
                    contains all event handlers, which collectively coordinate the model and the view.
                </li>
                <li>
                    <a href="https://github.com/eolsenbyui/eolsenbyui.github.io/blob/master/wdd330/week14/final/model.js" target="_blank">model.js</a>
                    serves as the model for the application, interfacing with the 
                    <a href="https://www.datamuse.com/api/" target="_blank">Datamuse API</a>.
                </li>
                <li>
                    <a href="https://github.com/eolsenbyui/eolsenbyui.github.io/blob/master/wdd330/week14/final/view.js" target="_blank">view.js</a>
                    contains the View class that manages the UI.
                </li>
                <li>
                    <a href="https://github.com/eolsenbyui/eolsenbyui.github.io/blob/master/wdd330/week14/final/offensiveb64.js" target="_blank">offensiveB64.js</a>
                    exports a Base64-encoded array of profane and otherwise offensive words and phrases.</li>
            </ul>
        </p>
        <p>Below is a list of specific JavaScript grading rubrics mapped to module and function:</p>
        <ul id="javascript-rubrics">
            <li>
                <strong>Serious, honest logic.</strong>
                Building the queries for the 
                <a href="https://www.datamuse.com/api/" target="_blank">Datamuse API</a>
                is serious, honest logic.  This can be found in 
                <a href="https://github.com/eolsenbyui/eolsenbyui.github.io/blob/master/wdd330/week14/final/model.js" target="_blank">model.js</a>
                in the <code>buildQuery()</code> and <code>getWordList()</code> functions.
                <br><br>
                There is also logic for conditionally rendering the JSON results in
                <a href="https://github.com/eolsenbyui/eolsenbyui.github.io/blob/master/wdd330/week14/final/view.js" target="_blank">view.js</a>
                in the <code>renderList()</code> and <code>_renderList()</code> methods.  The <code>createTableHeader()</code>
                method also contains some logic, buiding the results table header based on the content of the JSON
                objects returned by the API.
            </li>
            <li>
                <strong>Validating screen data.</strong>
                The approach to validating screen data in Poet's Pal is to <em>prevent</em> validation probems in the first place.
                The <code>change</code> event handler for the "exactly" | "less than" dropdown conditionally alters the acceptable 
                values for the numeric input field to its right.  This is found in 
                <a href="https://github.com/eolsenbyui/eolsenbyui.github.io/blob/master/wdd330/week14/final/main.js" target="_blank">main.js</a>.
            </li>
            <li>
                <strong>Looping through an array of JSON data to display to the screen.</strong>
                This can be found in the <code>renderList()</code> and <code>_renderList()</code> methods
                of the View class in 
                <a href="https://github.com/eolsenbyui/eolsenbyui.github.io/blob/master/wdd330/week14/final/view.js" target="_blank">view.js</a>.                
            </li>
            <li>
                <strong>Creating and using events.</strong>
                All event handlers can be found in 
                <a href="https://github.com/eolsenbyui/eolsenbyui.github.io/blob/master/wdd330/week14/final/main.js" target="_blank">main.js</a>.
                For details on the event handlers, please see <a href="#events">Events</a>, below.
            </li>
            <li>
                <strong>Changing element styles with JavaScript.</strong>
                Since the number of syllables is only returned by the 
                <a href="https://www.datamuse.com/api/" target="_blank">Datamuse API</a> 
                when rhyming is involved, the elements related to number of syllables are enabled only
                when the "Rhymes with" input field (<code>id="rhyme"</code>) has text entered into it.
                In order to make the group of controls <em>appear</em> to be disabled as well as being 
                actually disabled, the colors for the enclosing <code>&lt;div&gt;</code> are changed
                to a light gray.  This can be found in the <code>enableSyllables()</code> and 
                <code>disableSyllables()</code> in 
                <a href="https://github.com/eolsenbyui/eolsenbyui.github.io/blob/master/wdd330/week14/final/view.js" target="_blank">view.js</a>.
                <br><br>
                The app also does something similar
                in changing the <code>min</code> attribute of the numeric input field for number of syllables.
                This code is found in the <code>change</code> event handler for the "nSyl" dropdown in 
                <a href="https://github.com/eolsenbyui/eolsenbyui.github.io/blob/master/wdd330/week14/final/main.js" target="_blank">main.js</a>.
            </li>
            <li>
                <strong>Changing element classes to use different CSS rules.</strong>
                This is done in the <code>renderList()</code>, <code>displayError()</code>, <code>clearError()</code>,
                <code>displayNumberOfResults()</code>, <code>clearInfo()</code>, and <code>clear()</code> methods
                of the View class in 
                <a href="https://github.com/eolsenbyui/eolsenbyui.github.io/blob/master/wdd330/week14/final/view.js" target="_blank">view.js</a>.
                It is accomplished by adding or removing the <code>hidden</code> class to the classlist of 
                the several elements involved.
            </li>
        </ul>
        <h3>Third-Party APIs</h3>
        <p>
            The <code>/words</code> endpoint of the <a href="https://www.datamuse.com/api/" target="_blank">Datamuse API</a>
            is used with various query parameters depending on user input.  As noted in the 
            <a href="#grading-json">JSON</a> section, below, two calls are made to the API when rhymes are requested.
            API calls typically respond in less than 70 milliseconds.
        </p>
        <h3 id="grading-css">CSS</h3>
        <p>
            All styles in CSS are found in the file 
            <a href="https://github.com/eolsenbyui/eolsenbyui.github.io/blob/master/wdd330/week14/final/styles.css" target="_blank">styles.css</a>.
        </p>
        <ul>
            <li><code>:root</code> to define common values in variables.</li>
            <li>
                Defined a basic font size in the <code>&lt;html&gt;</code> tag.  All other 
                sizes are defined in <code>em</code>.
            </li>
            <li>
                One simple <code>@media</code> query that shrinks the elements for smaller screens.
                Since all sizes are in <code>em</code>, only one simple media query was needed.
                All controls and fonts shrink proportionally for smaller screens.
            </li>
            <li>
                Styles for sizing and positioning input fields and their labels.
            </li>
            <li>
                Use of <code>tr:nth-child(even)</code> to provide subtle striping for ease of reading
                the results table.
            </li>
            <li>
                Choice of fonts to give input fields, buttons, footer credits, and results table headers a "retro" look.
                Also, rounded corners in the input fields and buttons reinforce the look.
            </li>
            <li>
                Position the <code>&lt;footer&gt;</code> at the very bottom of the screen regardless of 
                the vertical screen size.
            </li>
            <li>Provide an attractive marbled background image.</li>
            <li>
                Employed <code>:first-of-type</code>, <code>:last-of-type</code>, <code>:first-child</code>,
                and <code>:last-child</code> to provide justification and padding to enhance the readability
                of the results.
            </li>
            <li>Used <code>class="hidden"</code> with <code>display: none;</code> to selectively hide elements as needed.</li>
            <li>The <code>:hover</code> pseudo-class selector is used for input fields and buttons.</li>
        </ul>
        <h3 id="grading-json">JSON</h3>
        <p>
            The response from the <a href="https://www.datamuse.com/api/" target="_blank">Datamuse API</a>
            is an array of JSON objects.  The content of those JSON objects varies depending on the query
            sent to the API, which in turn, depends on the fields filled out by the user.  The logic for parsing
            and rendering the arrays of JSON objects is found in the View class in view.js, specifically in the 
            public <code>renderList()</code> and the private <code>_renderList()</code> methods.
        </p>
        <p>
            When the "Rhymes with" input field is filled by the user, two API calls are sent to the API:
            <ol>
                <li>Query for perfect rhymes.</li>
                <li>Query for imperfect rhymes.</li>
            </ol>
            The JSON arrays from the responses of both are combined and displayed in the output table.
        </p>
        <h3 id="events">Events</h3>
        <p>
            All event handlers are found in main.js as well as pseudo-class selectors in styles.css.
            In order of appearance, they are:
        </p>
        <ul>
            <li><code>submit</code> for the input form.</li>
            <li>
                <code>change</code> for the number of syllables input field.  If "exactly" is chosen 
                in the drop-down to the left, the minimum number of syllables can be 1, otherwise,
                the minumum number of syllables for "less than" must be 2.
            </li>
            <li>
                The <code>input</code> event is handled for each text input field.   At a minimum,
                it clears any error and information text.  There is additional processing 
                for the following fields:
                <ul>
                    <li>
                        If text is present in the "Rhymes with" input field, the "number of syllables" controls are enabled.
                        Otherwise, when the "Rhymes with" field is empty, the "number of syllables" controls are disabled.
                    </li>
                    <li>
                        If the number entered in the "number of syllables" input field is exactly 1, the text
                        "syllables" that follows it is changed to the singular, "syllable."
                    </li>
                </ul>
            </li>
            <li><code>click</code> event for the Clear button, which clears all fields.</li>
        </ul>
        <h3>Local Storage</h3>
        <p>No local storage is used in the Poet's Pal app.</p>
    </section>
    <section>
        <h2>Challenges and Resolutions</h2>
        <p>
            The Datamuse API is easy to use and there were few challenges.  The couple of challenges
            I did encounter were related to CSS and styling.
        </p>
        <ol>
            <li>Positioning the "nearly" checkbox and its label.</li>
            <li>The results table underlapped the footer.</li>
        </ol>
        <h3>Resolutions</h3>
        <ol>
            <li>
                Successfully used the <code>float: left</code> style for the "nearly" checkbox and its label.
                Then usability testing showed that the checkbox was confusing, so it was ultimately discarded
                and near rhymes are always requested when a rhyme is requested.  Perfect rhymes are displayed
                first, followed by imperfect or "near" rhymes.  
                Words that rhyme imperfectly are displayed in <em>italics.</em>
            </li>
            <li>
                The footer is now hidden when results are displayed.  Its visibility is restored when the Clear button is
                tapped or clicked.  The author hopes that the user is more interested in the results than 
                in the credits in the footer.
            </li>
        </ol>
    </section>
    <section>
        <h2>Application of Topics from WDD330</h2>
        <p>Here are a dozen.  There are probably more, but this is a representative sample:</p>
        <ul>
            <li>
                Mobile-first design from the "Master Mobile UX" video from Week 1.
            </li>
            <li>
                Don't Repeat Yourself (DRY) principle from Week 2's Team Activity, particularly in model.js
                but also in the View class in view.js and in the CSS.
            </li>
            <li>
                Modules were created for "separation of concerns."  The module, main.js, includes all of the event
                handlers and model.js takes care of the interface with the Datamuse API.  The model is so small that
                it probably doesn't warrant being a class.  The view is contained in a View class in view.js.
                I felt that creating a controller class would add complexity
                that would provide no advantage to this use case, though the modules were created with MVC in mind.
            </li>
            <li>
                Form and object-oriented programming (OOP) from Week 4.  The UI begins with a form in which to enter
                search criteria to be submitted to the Datamuse API.  OOP is found in the View class (view.js).
            </li>
            <li>Used a "hidden" class to selectively display and hide elements as we did in Week 5 in the Great Hikes activity.</li>
            <li>
                The principles and techniques for testing and debugging from Week 5 were used throughout the 
                duration of the project.
            </li>
            <li>
                Building HTML "on the fly" in JavaScript using the <code>document.createElement()</code> 
                and <code>appendChild()</code> methods, 
                as we did in the Great Hikes and Star Wars API activities.
            </li>
            <li>
                Definitely used AJAX, as we learned in Week 7, to make calls to the Datamuse API.
            </li>
            <li>
                Used a small Node.js app to encode the profane words list for the profanity filter 
                to Base64 so I didn't have to look at the profane words.
            </li>
            <li>
                The "number of syllables" control only allows numeric input, and only a certain range of numbers
                (Form validation, Week 10).  All other input controls accept free text.
            </li>
            <li>
                Import and export, also from Week 10, were used in the modules.
            </li>
            <li>
                The RESTful <code>fetch()</code> call to the Datamuse API was taken nearly verbatim from
                the Week 11 <code>getJSON()</code> starter code for the JWT Team Activity, with the addition
                of the <code>throw</code> from the modified <code>makeRequest()</code> function.
            </li>
        </ul>
    </section>
    <section>
        <p><strong>And now, we give you</strong> &lt;drum roll&gt; the <a href="../final/" target="_blank">Poet's Pal</a>.</p>
    </section>
    <footer>
        
    </footer>
    <script src="main.js" type="module"></script>
</body>

</html>
